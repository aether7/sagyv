{% extends "panel_control.html" %}
{% load static %}
{% block content %}

<div id="mensaje" class="center alert" style="display:none"></div>

<ul class="nav nav-tabs" role="tablist" id="myTab">
    <li class="active"><a href="#bodega" role="tab" data-toggle="tab">Bodega</a></li>
    <li><a href="#transito" role="tab" data-toggle="tab">En transito</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="bodega">
        <div class="panel panel-default">
            <table class="table center">
                <tr>
                    <td>codigo</td>
                    <td>Peso</td>
                    <td>Tipo</td>
                    <td>Stock</td>
                    <td>Precio actual</td>
                    <td>acciones</td>
                </tr>
                {% for producto in productos  %}
                <tr>
                    <td>{{ producto.codigo }}</td>
                    <td>{{ producto.peso }} Kilos</td>
                    <td>{{ producto.tipo_producto.nombre }}</td>
                    <td>
                        <span id="stock_{{ producto.id }}">
                            {{ producto.stock }}
                        </span>
                    </td>
                    <td>
                        $ <span id="precio_{{ producto.id }}">
                            {{ producto.get_precio_producto }}
                        </span>
                    </td>
                    <td>
                        <button type="button" class="btn btn-xs" data-toggle="modal"
                            onclick="App.bodegaController.showModal('stock', {{ producto.id }}, 1);">
                            <span class="glyphicon glyphicon-plus" title="agregar stock"></span>
                        </button>

                        <button type="button" class="btn btn-xs" data-toggle="modal"
                            onclick="App.bodegaController.showModal('stock', {{ producto.id }}, 2);">
                            <span class="glyphicon glyphicon-minus" title="retirar stock"></span>
                        </button>

                         <button type="button" class="btn btn-xs" data-toggle="modal"
                            onclick="App.bodegaController.showModal('precio', {{ producto.id }})">
                            <span class="glyphicon glyphicon-usd" title="actualizar precio"></span>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    <div class="tab-pane" id="transito">transito</div>
</div>



{% include "components/modal_bodega.html" with modo="add"  %}
{% include "components/modal_precio.html" %}

{% endblock %}
{% block js %}
<script src="{% static 'js/controllers/bodega.js' %}"></script>
<script>
    App.bodegaController = new App.Controllers.Bodega();
    App.bodegaController.init();

    //tab control
    $('#bodega_tab a').click(function (e) {
        e.preventDefault()
        $(this).tab('show')
    })

</script>
{% endblock %}
