{% extends "panel_control.html" %}
{% load static %}

{% block content %}
    <section id="liquidacion" data-ng-app="liquidacionApp" data-ng-controller="LiquidacionController as liqCtrl">
        <section class="panel-busqueda">
            <label for="lista_vehiculos" >Vehículo:</label>
            <select name="lista_vehiculos" id="lista_vehiculos" data-ng-model="liqCtrl.idVehiculo">
                {% for vehiculo in vehiculos %}
                <option value="{{ vehiculo.id }}">{{ vehiculo.numero }} - {{ vehiculo.patente }}</option>
                {% endfor %}
            </select>
            <button class="btn btn-primary" data-ng-click="liqCtrl.buscarGuia()">Buscar</button>
        </section>

        <section class="panel-cabecera">
                <div>
                    <div>
                        <label for="numero_guia">Numero guía:</label>
                        <input id="numero_guia" type="text" value="" data-ng-model="liqCtrl.numeroGuia" />
                        <label for="fecha">Fecha</label>
                        <input id="fecha" type="date" value="" />
                        <label for="">Chofer:</label>
                        <input type="text" value="juanito" />
                        <label for="kilometraje">KM</label>
                        <input id="kilometraje" type="text" value="" />
                        <label for="">KM recorridos</label>
                        <input type="text" readonly value="1023012031023">
                    </div>
                </div>
                <div>
                    <label for="">numero de boleta</label>
                    <input type="text">(ajaxazo)
                </div>
        </section>

        <section class="panel-detalle">
            {% verbatim %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Cantidad en Tránsito</th>
                        <th>Llenos</th>
                        <th>Vacíos</th>
                        <th>Precio Unitario</th>
                        <th>Cantidad a pagar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-ng-repeat="producto in liqCtrl.productos"
                        data-ng-controller="ProductoController as productoCtrl">
                        <td>{{ producto.codigo }}</td>
                        <td>{{ producto.cantidad }}</td>
                        <td>{{ productoCtrl.calcularRestante(producto) }}</td>
                        <td>
                            <input type="text" value="{{ producto.vacios }}"
                                data-ng-model="producto.vacios"
                                data-ng-keyup="liqCtrl.calcularSubTotal()" />
                        </td>
                        <td>{{ producto.precio | currency }}</td>
                        <td style="text-align:right">
                            {{ producto.valorTotal | currency }}
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">Subtotal: {{ liqCtrl.subTotal | currency }}</td>
                        <td colspan="2">Descuentos: {{ liqCtrl.descuentos | currency }}</td>
                        <td colspan="2">Total: {{ liqCtrl.total | currency }}</td>
                    </tr>
                </tfoot>
            </table>
            {% endverbatim %}
        </section>

        <section>
            <h1>Guia lipigas</h1>
            <label for="">Numero guía</label>
            <input type="text" value="" />
            <label for="">Cliente</label>
            <input type="text" value="cliente muy importante" />
            <br />
            sistema de carga de guia
            <br />
            (si el cliente tiene credito se aplica el total de la guía)<br />
            (si el cliente tiene solo descuento se descuenta el % X del producto)
        </section>

        <section>
            <h1>Guías propias</h1>
            <label for="">Numero guía</label>
            <input type="text" value="" />
            <label for="">Cliente</label>
            <input type="text" value="cliente muy importante" />
            <br />
            sistema de carga de guia
            <br />
            (si el cliente tiene credito se aplica el total de la guía)<br />
            (si el cliente tiene solo descuento se descuenta el % X del producto)
        </section>

        <section>
            <h1>Voucher Lipigas</h1>
            tarjeta comercial <br />
            <select name="" id="">
                <option value="">RIPLEY y DEMASES</option>
            </select>
            <label for="">monto</label>
            <input type="text" value="100102203012301203" />
            <button class="btn btn-default">+</button>

            <table>
                <thead>
                    <tr>
                        <th>Tarjeta</th>
                        <th>Monto</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Ripley</td>
                        <td>100000000</td>
                    </tr>
                </tbody>
            </table>

            <label for="">descuentos</label>
            <input type="text" value="0" />

            <label for="">TOTAL</label>
            {% verbatim %}
            <input type="text" value="{{ 123123123 | currency }}" />
            {% endverbatim %}

            <label for="">Numero Cierre</label>
            <input type="text" />
            <label for="">Terminal</label>
            <input type="text" value="123123">
        </section>


        <section>
            <h1>Voucher Transbank</h1>
            <label for="">tipo de tarjeta</label>

            <select name="" id="">
                <option value="">DEBITO</option>
                <option value="">VISA</option>
                <option value="">Mastercard</option>
                <option value="">Dinners Club</option>
            </select>

            <button class="btn btn-default">+</button>

            <table>
                <thead>
                    <tr>
                        <th>Tarjeta</th>
                        <th>Monto</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Ripley</td>
                        <td>100000000</td>
                    </tr>
                </tbody>
            </table>

            <label for="">descuentos</label>
            <input type="text" value="0" />

            <label for="">TOTAL</label>
            {% verbatim %}
            <input type="text" value="{{ 123123123 | currency }}" />
            {% endverbatim %}

            <label for="">Numero Cierre</label>
            <input type="text" />
            <label for="">TERMINAL</label>
            <input type="text" value="" />
            <label for="">CUOTAS</label>
            <input type="text" />
        </section>

        <section>
            <h1>Cupones de prepago</h1>
            <label for="">numero</label>
            <input type="text">
            <label for="">cliente</label>
            <input type="text" value="" />
            <label for="">formato</label>
            <select name="" id="">
                <option value="">15 KG (codigo balon)</option>
            </select>
            <label for="">Descuento</label>
            <input type="text" value="" />
        </section>

        <section>
            <h1>OTROS</h1>
            <label for="">Concepto</label>
            <input type="text">
            <label for="">monto</label>
            <input type="text">
            (" AQUI SE INGRESA SIGNO POSITIVO O NEGATIVO PARA SUMAR O RESTAR EL VALOR ")
        </section>

        <section>
            <h1>CHEQUES</h1>
            <label for="">MONTO</label>
            <label for="">Banco</label>
            <label for="">SERIE</label>
            <label for="">FECHA</label>
        </section>


        <button class="btn btn-default">Guia Lipigas</button>
        <button class="btn btn-default">Guia propia</button>
        <button class="btn btn-default">Voucher Lipigas</button>
        <button class="btn btn-default">Voucher Transbank</button>
        <button class="btn btn-default">Cupones de prepago</button>
        <button class="btn btn-default">Otros</button>
        <button class="btn btn-default">VENTA GARANTIAS</button>
        <button class="btn btn-default">ABONO</button>
        <button class="btn btn-default">CHEQUES</button>
        <button class="btn btn-primary">Guardar</button>
        <button class="btn btn-primary">CERRAR LIQUIDACIÓN</button>

        (Cerrada la liquidación, se puede mostrar la información resumen y exportar info a EXCEL).
    </section>
{% endblock %}

{% block js %}
<script src="{% static 'js/vendor/angular.min.js' %}"></script>
<script src="{% static 'js/plugins/typeahead.min.js' %}"></script>
<script src="{% static 'js/controllers/liquidacion_controller.js' %}"></script>
<script>
    App.urls.set("liquidacion:obtener_guia", "{% url 'liquidacion:obtener_guia' %}");
    App.urls.set("liquidacion:buscar_cliente", "{% url 'liquidacion:buscar_cliente' %}");
</script>
{% endblock %}
