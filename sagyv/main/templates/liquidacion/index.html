{% extends "panel_control.html" %}
{% load static from staticfiles %}

{% block content %}
    <section id="liquidacion" class="panel-liquidacion"
        data-ng-app="liquidacionApp" data-ng-controller="LiquidacionController as liqCtrl">

        <section class="panel-busqueda">
            <label for="lista_vehiculos" >Vehículo</label>
            <select name="lista_vehiculos" id="lista_vehiculos" data-ng-model="liqCtrl.idVehiculo">
                {% for vehiculo in vehiculos %}
                <option value="{{ vehiculo.id }}">{{ vehiculo.numero }} - {{ vehiculo.patente }}</option>
                {% endfor %}
            </select>
            <button class="btn btn-primary" data-ng-click="liqCtrl.buscarGuia()">Buscar</button>
        </section>

        {% include "liquidacion/panel_cabecera.html" %}
        {% include "liquidacion/panel_detalle.html" %}

        <div data-ng-controller="ClienteController as cliente">
            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="guia_propia"
                data-ng-click="cliente.resetearCliente()">Guia propia</button>

            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="guia_lipigas">Guia Lipigas</button>

            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="voucher_lipigas">Voucher Lipigas</button>

            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="voucher_transbank">Voucher Transbank</button>

            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="cupones_prepago">Cupones de prepago</button>

            <button type="button" class="btn btn-default"
                data-accion="abre_modal"
                data-modal="otros">Otros</button>

            {% include "liquidacion/components/modal_guia_propia.html" %}
            {% include "liquidacion/components/modal_guia_lipigas.html" %}
            {% include "liquidacion/components/modal_voucher_lipigas.html" %}
            {% include "liquidacion/components/modal_voucher_transbank.html" %}
            {% include "liquidacion/components/modal_cupones_prepago.html" %}
            {% include "liquidacion/components/modal_otros.html" %}

        </div>

        <button class="btn btn-default" data-accion="abre_modal" data-modal="cheques">CHEQUES</button>
        <button class="btn btn-primary" data-modal="">Guardar</button>
        <button class="btn btn-default" data-modal="">VENTA GARANTIAS</button>

        <button class="btn btn-primary" data-modal=""
            data-ng-click="liqCtrl.cerrarLiquidacion()">CERRAR LIQUIDACIÓN</button>
    </section>
{% endblock %}

{% block js %}
<script src="{% static 'js/vendor/angular.min.js' %}"></script>
<script src="{% static 'js/plugins/typeahead.min.js' %}"></script>
<script src="{% static 'js/common_functions.js' %}"></script>
<script src="{% static 'js/liquidacion.bundle.js' %}"></script>
<script>
    App.urls.set("liquidacion:obtener_guia", "{% url 'liquidacion:obtener_guia' %}");
    App.urls.set("liquidacion:buscar_cliente", "{% url 'liquidacion:buscar_cliente' %}");
    App.urls.set("liquidacion:cerrar", "{% url 'liquidacion:cerrar' %}");
</script>
{% endblock %}
